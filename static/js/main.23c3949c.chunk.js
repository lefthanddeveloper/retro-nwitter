(this["webpackJsonpretro-nwitter"]=this["webpackJsonpretro-nwitter"]||[]).push([[0],{56:function(e,t,n){},57:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var a=n(8),c=n.n(a),r=n(44),s=n.n(r),i=(n(56),n(12)),o=(n(57),n(45)),u=n(40),l=n(38),j=n(41),b=(Object(o.a)({apiKey:"AIzaSyA3Ic2rMaX2jXFZxb0n4bUGZ2192HbcUO0",authDomain:"retro-nwitter.firebaseapp.com",projectId:"retro-nwitter",storageBucket:"retro-nwitter.appspot.com",messagingSenderId:"661725137678",appId:"1:661725137678:web:f365a2182789232835655f",measurementId:"G-NJ5BTV4BSV"}),u),d=u.getAuth(),O=l,m=l.getFirestore(),f=j,h=j.getStorage(),p=n(26),x=n(14),g=n(1),v=n.n(g),w=n(2),N=n(7);var y=function(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),s=Object(i.a)(r,2),o=s[0],u=s[1],l=Object(a.useState)(""),j=Object(i.a)(l,2),O=j[0],m=j[1],f=Object(a.useState)(""),h=Object(i.a)(f,2),p=h[0],g=h[1],y=Object(a.useState)(""),S=Object(i.a)(y,2),I=S[0],L=S[1],C=Object(a.useState)(!1),A=Object(i.a)(C,2),_=A[0],k=A[1],D=Object(x.f)(),P=function(e){var t=e.target,n=t.name,a=t.value;"email"===n?c(a):"password"===n?u(a):"confirm"===n?g(a):"displayName"===n&&m(a)},B=function(){var e=Object(w.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),o===p){e.next=4;break}return alert("INCORRECT PASSWORD"),e.abrupt("return");case 4:try{b.createUserWithEmailAndPassword(d,n,o).then((function(e){b.updateProfile(e.user,{displayName:O}).then((function(){D.push("/")}))}))}catch(I){L(I.message)}case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)("form",{onSubmit:B,className:"form_Login",children:[Object(N.jsx)("input",{className:"form_input",name:"email",type:"text",placeholder:"New Email Account",value:n,onChange:P,required:!0}),Object(N.jsx)("input",{className:"form_input",name:"password",type:"password",placeholder:"Password",value:o,onChange:P,minLength:"5",required:!0}),Object(N.jsx)("input",{className:"form_input",name:"confirm",type:"password",placeholder:"Confirm Password",value:p,onChange:P,minLength:"5",required:!0}),Object(N.jsx)("input",{className:"form_input",type:"text",placeholder:"Display Name",name:"displayName",value:O,onChange:P,required:!0}),Object(N.jsx)("input",{className:"form_submit ".concat(_?"login-mouseOver":"login-mouseOut"),type:"submit",value:"Create",onMouseOver:function(){k(!0)},onMouseOut:function(){k(!1)}})]}),Object(N.jsx)("span",{children:I})]})},S=n(48),I=n(49);n(65);var L=function(e){var t=e.nweetObj,n=e.isOwner,a=function(){var e=Object(w.a)(v.a.mark((function e(){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete?")){e.next=9;break}if(""===t.attachmentUrl){e.next=7;break}return n=h,a=f.ref(n,t.attachmentUrl),e.next=7,f.deleteObject(a);case 7:return e.next=9,O.deleteDoc(O.doc(m,"nweets",t.id));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(N.jsxs)("div",{className:"nweetObj",children:[Object(N.jsxs)("div",{className:"nweetContent",children:[Object(N.jsx)("span",{className:"nweetText",children:"* ".concat(t.creatorDisplayName," : ").concat(t.text)}),Object(N.jsxs)("span",{className:"nweetCreatedAt",children:["(","".concat(new Date(t.createdAt).toLocaleDateString()," ").concat(new Date(t.createdAt).toLocaleTimeString()),")"]}),n&&Object(N.jsx)(N.Fragment,{children:Object(N.jsx)(I.a,{className:"deleteBtn",onClick:a})})]}),t.attachmentUrl&&Object(N.jsx)("img",{className:"nweetImage",src:t.attachmentUrl})]})};var C=function(e){var t=e.userObj,n=e.isProfile,c=Object(a.useState)([]),r=Object(i.a)(c,2),s=r[0],o=r[1];return Object(a.useEffect)((function(){var e,a;e=n?O.query(O.collection(m,"nweets"),O.where("creatorId","==",t.uid)):O.query(O.collection(m,"nweets"),O.orderBy("createdAt")),O.onSnapshot(e,(function(e){a=e.docs.map((function(e){return Object(S.a)({id:e.id},e.data())})),o(a)}))}),[]),Object(N.jsx)("div",{className:"nweetContainer",children:s.map((function(e){return Object(N.jsx)(L,{nweetObj:e,isOwner:t&&t.uid===e.creatorId},e.id)}))})},A=(n(66),n(50)),_=n(73);var k=function(e){var t=e.isLoggedIn,n=e.userObj,c=Object(x.f)(),r=Object(a.useState)(""),s=Object(i.a)(r,2),o=s[0],u=s[1],l=Object(a.useState)(!1),j=Object(i.a)(l,2),b=j[0],d=j[1],p=Object(a.useState)(""),g=Object(i.a)(p,2),y=g[0],S=g[1],I=Object(N.jsx)("img",{src:y,className:"attachedImage"}),L=function(){var e=Object(w.a)(v.a.mark((function e(t){var a,c,r,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,a="",""==y){e.next=11;break}return c=f.ref(h,"".concat(n.uid,"/").concat(Object(_.a)())),e.next=7,f.uploadString(c,y,"data_url");case 7:return r=e.sent,e.next=10,f.getDownloadURL(r.ref);case 10:a=e.sent;case 11:return s={text:o,createdAt:Date.now(),creatorDisplayName:n.displayName,creatorId:n.uid,attachmentUrl:a},console.log(s),e.next=15,O.addDoc(O.collection(m,"nweets"),s);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),console.error("Error adding document : "+e.t0);case 20:u(""),S("");case 22:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsx)("div",{className:"nweetForm",children:Object(N.jsxs)("form",{onSubmit:L,className:"form_nweet",children:[Object(N.jsxs)("div",{className:"inputArea",children:[Object(N.jsx)("textarea",{className:"input_text",type:"textarea",placeholder:"What's in your head now?",required:!0,value:o,onChange:function(e){var t=e.target.value;u(t)},onClick:function(e){t||(alert("Please, Log In"),c.push("/login"))}}),y&&Object(N.jsxs)(N.Fragment,{children:[I,Object(N.jsx)("button",{className:"btn-cancelImage",onClick:function(){S(null)},children:"X"})]})]}),Object(N.jsxs)("div",{className:"form_bottom",children:[Object(N.jsxs)("label",{className:"label-image",children:[Object(N.jsx)(A.a,{className:"btn_image"}),Object(N.jsx)("input",{className:"input-image",type:"file",accept:"image/*",onChange:function(e){var t=e.target.files;if(0!==t.length){var n=t[0],a=new FileReader;a.onloadend=function(e){var t=e.currentTarget.result;S(t)},a.readAsDataURL(n)}}})]}),Object(N.jsx)("input",{className:"input_submit ".concat(b?"submit-mouseOver":"submit-mouseOut"),onMouseOver:function(){d(!0)},onMouseOut:function(){d(!1)},type:"submit"})]})]})})};n(67);var D=function(e){var t=e.isLoggedIn,n=e.userObj;return Object(N.jsxs)("div",{children:[Object(N.jsx)(k,{isLoggedIn:t,userObj:n}),Object(N.jsx)(C,{userObj:n,isProfile:!1})]})};n(68);var P=function(){var e=Object(x.f)(),t=Object(a.useState)(""),n=Object(i.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(""),o=Object(i.a)(s,2),u=o[0],l=o[1],j=Object(a.useState)(""),O=Object(i.a)(j,2),m=O[0],f=O[1],h=Object(a.useState)(!1),g=Object(i.a)(h,2),v=g[0],w=g[1],y=function(e){var t=e.target,n=t.value,a=t.name;"email"===a?r(n):"password"===a&&l(n)},S=function(t){var n,a=t.target.name;"google"===a?n=new b.GoogleAuthProvider:"github"===a&&(n=new b.GithubAuthProvider),b.signInWithPopup(d,n).then((function(t){console.log(t),e.push("/")})).catch((function(e){f(e.code)}))};return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)("form",{className:"form_Login",onSubmit:function(t){t.preventDefault(),b.signInWithEmailAndPassword(d,c,u).then((function(t){e.push("/")})).catch((function(e){f(e.code)}))},children:[Object(N.jsx)("input",{className:"form_input",type:"email",placeholder:"Email",name:"email",value:c,onChange:y,required:!0}),Object(N.jsx)("input",{className:"form_input",type:"password",placeholder:"Password",name:"password",value:u,onChange:y,required:!0}),Object(N.jsx)("input",{className:"form_submit ".concat(v?"login-mouseOver":"login-mouseOut"),type:"submit",value:"LogIn",onMouseOver:function(){w(!0)},onMouseOut:function(){w(!1)}})]}),Object(N.jsxs)("div",{className:"socialLogins",children:[Object(N.jsx)("button",{className:"btn-socialLogin",name:"google",onClick:S,children:"Continue with Google"}),Object(N.jsx)("button",{className:"btn-socialLogin",name:"github",onClick:S,children:"Continue with Github"})]}),Object(N.jsx)("div",{children:m}),Object(N.jsx)("div",{className:"btn-createAccount",children:Object(N.jsx)(p.b,{to:"/createAccount",children:"Create Account"})})]})};n(69);var B=function(e){var t=e.userObj,n=Object(x.f)(),c=function(){var e=Object(w.a)(v.a.mark((function e(){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=O.query(O.collection(m,"nweets"),O.where("creatorId","==",t.uid),O.orderBy("createdAt")),e.next=3,O.getDocs(n);case 3:e.sent.forEach((function(e){console.log(e.data())}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){c()}),[]);var r=function(){var e=Object(w.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.signOut(d);case 2:alert("Logged Out Successfully"),n.push("/");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)("div",{className:"profile",children:[Object(N.jsxs)("div",{className:"profileName",children:[t&&t.displayName," Profile"]}),Object(N.jsx)("button",{onClick:r,className:"btn-logout",children:"Log Out"}),Object(N.jsx)("div",{className:"myNweets",children:"My RetroNweets"}),Object(N.jsx)("hr",{className:"hrLine"}),Object(N.jsx)(C,{userObj:t,isProfile:!0})]})})};n(70);var F=function(e){var t=e.isLoggedIn;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)("ul",{className:"ul_navBar",children:[Object(N.jsx)("li",{className:"li_navBar",children:Object(N.jsx)(p.b,{to:"/",className:"link_navBar",children:"Retro-Nwitter"})}),Object(N.jsx)("li",{className:"li_navBar",children:t?Object(N.jsx)(p.b,{to:"/profile",className:"link_navBar",children:"Profile"}):Object(N.jsx)(p.b,{to:"/login",className:"link_navBar",children:"LogIn"})})]}),Object(N.jsx)("hr",{className:"line_navBar"})]})},E=function(e){var t=e.isLoggedIn,n=e.userObj;return Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)(p.a,{children:[Object(N.jsx)(F,{isLoggedIn:t}),Object(N.jsxs)(x.c,{children:[Object(N.jsx)(x.a,{exact:!0,path:"/",children:Object(N.jsx)(D,{isLoggedIn:t,userObj:n})}),Object(N.jsx)(x.a,{exact:!0,path:"/profile",children:Object(N.jsx)(B,{userObj:n})}),Object(N.jsx)(x.a,{exact:!0,path:"/login",children:Object(N.jsx)(P,{})}),Object(N.jsx)(x.a,{exact:!0,path:"/createAccount",children:Object(N.jsx)(y,{})})]})]})})};var U=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(d.currentUser),s=Object(i.a)(r,2),o=s[0],u=s[1],l=Object(a.useState)(null),j=Object(i.a)(l,2),O=j[0],m=j[1];return Object(a.useEffect)((function(){b.onAuthStateChanged(d,(function(e){m(e),u(e),c(!0)}))}),[]),Object(N.jsxs)("div",{className:"App",children:[n?Object(N.jsx)(E,{isLoggedIn:o,userObj:O}):Object(N.jsx)("div",{children:"Loading..."}),Object(N.jsxs)("footer",{children:["\xa9 ",(new Date).getFullYear()," Retro Nwitter"]})]})};s.a.render(Object(N.jsx)(c.a.StrictMode,{children:Object(N.jsx)(U,{})}),document.getElementById("root"))}},[[71,1,2]]]);
//# sourceMappingURL=main.23c3949c.chunk.js.map